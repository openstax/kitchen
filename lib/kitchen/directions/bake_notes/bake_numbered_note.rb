# frozen_string_literal: true

module Kitchen
  module Directions
    module BakeNumberedNote
      def self.v1(note:)
        note.replace_children(with:
          <<~HTML
            <div class="os-note-body">#{note.children}</div>
          HTML
        )

        chapter_count = note.ancestor(:chapter).count_in(:book)
        note_count = note.count_in(:chapter)
        note.prepend(child:
          <<~HTML
            <div class="os-title">
              <span class="os-title-label">#{note.autogenerated_title}</span>
              <span class="os-number">#{chapter_count}.#{note_count}</span>
              <span class="os-divider"> </span>
            </div>
          HTML
        )
      end
    end
  end
end
